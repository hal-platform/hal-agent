services:

    ####################################################################################################################
    # Logging
    ####################################################################################################################

    logger.event:
        class: 'QL\Hal\Agent\Logger\EventLogger'
        arguments:
            - '@doctrine.em'
            - '@logger.event.factory'
            - '@logger.process.handler'
            - '@clock'
    logger.event.factory:
        class: 'QL\Hal\Agent\Logger\EventFactory'
        arguments: ['@doctrine.em', '@doctrine.random']
        calls:
            - ['setRedisHandler', ['@redis']]

    logger.process.handler:
        class: 'QL\Hal\Agent\Logger\ProcessHandler'
        arguments: ['@doctrine.em', '@utility.id.generator']

    # subscriber to symfony/console event system to prepare mcp logger
    logger.mcp.subscriber:
        class: 'QL\Hal\Agent\Logger\McpLoggerSetupSubscriber'
        arguments: ['@mcp.logger.factory']

    ####################################################################################################################
    # mcp logger services
    ####################################################################################################################

    logger.mcp.errorlog:
        class: 'QL\MCP\Logger\Service\ErrorLogService'
        factory: ['QL\Hal\Agent\Logger\McpErrorLogFactory', createMcpErrorLog]
        arguments: ['@root', '%mcp.logger.service.errorlog.options%']
