#!/usr/bin/env bash

echo "--------------------------------------------------------------------------------"
echo "(1/5) INITIALIZING boot2docker"
echo "--------------------------------------------------------------------------------"

boot2docker start
$(boot2docker shellinit)
echo;echo "OK!"

echo "--------------------------------------------------------------------------------"
echo "(2/5) INSTALLING rsync"
echo "--------------------------------------------------------------------------------"

boot2docker ssh tce-load -wi rsync
echo;echo "OK!"

echo "--------------------------------------------------------------------------------"
echo "(3/5) CREATING directories"
echo "--------------------------------------------------------------------------------"

boot2docker ssh sudo mkdir /docker-images
boot2docker ssh sudo mkdir /var/hal9000
echo;echo "OK!"

echo "--------------------------------------------------------------------------------"
echo "(4/5) SETTING permissions"
echo "--------------------------------------------------------------------------------"

boot2docker ssh sudo chown docker:docker /docker-images
boot2docker ssh sudo chown docker:docker /var/hal9000
echo;echo "OK!"

echo "--------------------------------------------------------------------------------"
echo "(5/5) PLEASE RUN THE FOLLOWING COMMAND TO FINISH AGENT SETUP"
echo "--------------------------------------------------------------------------------"

echo 'bin/hal docker:refresh'
echo
